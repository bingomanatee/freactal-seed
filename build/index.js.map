{"version":3,"sources":["webpack:///webpack/bootstrap ab62b73a0728c216e72f","webpack:///external \"lodash\"","webpack:///external \"react\"","webpack:///./src/Seed.js","webpack:///./src/localStorage.js","webpack:///./src/serialization.js","webpack:///./src/init.js","webpack:///./src/index.js","webpack:///external \"bottlejs\""],"names":["bottle","factory","container","Seed","constructor","initialState","serializationSource","SEED_SERIALIZATION_NONE","_propsMap","Map","_middleware","key","set","_effectsMap","_initializers","SERIALIZATION_LOCAL_STORAGE","addLocalStorageMiddleware","hash","forEach","data","value","localStorageHas","deserialize","localStorage","getItem","type","effects","addArrayAndSetEffect","name","addStateProp","slice","SEED_TYPE_OBJECT","addEffect","_","upperFirst","element","array","state","Object","assign","event","newArray","addMiddleware","freactalCtx","setItem","serialize","console","log","addInitializer","method","order","push","_makeInitializers","length","identity","initializers","sortBy","map","isString","initializer","pop","next","prev","then","addSideEffect","result","SEED_TYPE_STRING","addSetEffect","effectName","update","addBoolEffect","SEED_TYPE_BOOLEAN","addPropAndSetEffect","addBoolPropAndEffects","middleware","toHash","isUndefined","window","storage","x","removeItem","e","DOMException","code","isStorageAvailable","constant","out","JSON","parse","err","SEED_TYPE_INT","parseInt","isNaN","methodName","isFunction","stringify","toString","StateConfig","serialization","init"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ab62b73a0728c216e72f","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 1\n// module chunks = 0","import _ from 'lodash';\n\nexport default (bottle) => {\n  bottle.factory('Seed', (container) => class Seed {\n      constructor (initialState = {}, serializationSource = container.SEED_SERIALIZATION_NONE) {\n        this.serializationSource = serializationSource;\n        this._propsMap = new Map();\n        this._middleware = [];\n        for (let key in initialState) {\n          this._propsMap.set(key, initialState[key]);\n        }\n        this._effectsMap = new Map();\n        this._initializers = [];\n        if (this.serializationSource === Seed.SERIALIZATION_LOCAL_STORAGE) {\n          this.addLocalStorageMiddleware()\n        }\n      }\n      get initialState () {\n        return () => {\n          let hash = {};\n          this._propsMap.forEach((data, key) => {\n            hash[key] = data.value;\n            if (container.localStorageHas(key)) {\n              hash[key] = container.deserialize(container.localStorage.getItem(key),\n                data.type);\n            }\n          });\n          return hash;\n        }\n      }\n      get effects () {\n        let hash = {};\n        this._effectsMap.forEach((value, key) => hash[key] = value);\n        return hash;\n      }\n\n      addArrayAndSetEffect (name, value = []) {\n        //@TODO: add type enforcement for values\n        this.addStateProp(name, value ? value.slice(0) : [], container.SEED_TYPE_OBJECT);\n        this.addEffect(`set${_.upperFirst(name)}`, (element, array) => (state) => {\n          let hash = {};\n          hash[name] = array.slice(0);\n          return Object.assign({}, state, hash);\n        });\n        this.addEffect(`set${_.upperFirst(name)}Element`, (event, key, value) => (state) => {\n          let newArray = state[name] || [];\n          newArray[key] = value;\n          let hash = {};\n          hash[name] = newArray;\n          return Object.assign({}, state, hash);\n        });\n      }\n\n      addLocalStorageMiddleware () {\n        if (container.localStorage) {\n          this.addMiddleware((freactalCtx) => {\n            this._propsMap.forEach((data, key) => {\n              // note: no way of checking inclusion of key in state ??\n              let value = freactalCtx.state[key];\n              container.localStorage.setItem(key, container.serialize(value, data.type));\n            });\n            return freactalCtx;\n          })\n        } else {\n          console.log('no local storage');\n        }\n      }\n\n      /**\n       * note - method can be a function or a name of another effect (string).\n       * @param method {string | function}\n       * @param order {number}\n       */\n      addInitializer (method, order = 0) {\n        this._initializers.push({method, order});\n      }\n\n      _makeInitializers () {\n        return (effects, state) => {\n          console.log('initializer: state', state);\n          if (!this._initializers.length) {\n            return _.identity;\n          }\n          let initializers = _(this._initializers)\n            .sortBy('order')\n            .map('method')\n            .map((method) => _.isString ? effects[method] : method)\n            .value();\n\n          let initializer = initializers.pop();\n          while (initializers.length) {\n            initializer = ((next, prev) => prev.then(next))(initializer, initializers.pop());\n          }\n          return (effects) => initializer(effects)\n            .then(_.identity);\n        }\n      }\n\n      /**\n       * add a single effect method to the effects collection\n       * @param key {string} the name of the effect\n       * @param value {function} the effect\n       */\n      addEffect (key, value) {\n        this._effectsMap.set(key, value);\n      }\n\n      /**\n       * do an effect that does not mutate state. It affects things besides state,\n       * so the side effect executes and the state is unmodified. You don't have to return\n       * a state mutator from the method; it's managed for you.\n       *\n       * @param name {String}\n       * @param method {function}\n       */\n      addSideEffect (name, method) {\n        this.addEffect(name, (effects) => {\n          if (_.isString(method)) {\n            return effects[method](effects)\n              .then(_.identity);\n          }\n          let result = method(effects);\n          return result.then ? result.then(_.identity) : _.identity;\n        });\n      }\n\n      /**\n       * adds a middleware pipe to the middleware list.\n       * @param method {function}\n       */\n      addMiddleware (method) {\n        this._middleware.push(method);\n      }\n\n      addStateProp (key, value, type = container.SEED_TYPE_STRING) {\n        this._propsMap.set(key, {value, type});\n      }\n\n      addSetEffect (name, type = container.SEED_TYPE_STRING) {\n        let effectName = 'set' + _.upperFirst(name);\n        // @TODO: validation\n        this.addEffect(effectName, container.update((state, value) => {\n          let hash = {};\n          hash[name] = value;\n          return hash;\n        }));\n      }\n\n      addBoolEffect (name) {\n        this.addSetEffect(name, container.SEED_TYPE_BOOLEAN);\n        this.addEffect(`${name}On`, container.update((state) => {\n          let hash = {};\n          hash[name] = true;\n          return hash;\n        }))\n        this.addEffect(`${name}Off`, container.update((state) => {\n          let hash = {};\n          hash[name] = false;\n          return hash;\n        }))\n      }\n\n      /**\n       * Both creates a default value for a property and a set method.\n       *   for example if you want to add an int property called \"priority\"\n       *   addPropAndSetEffect both creates a property\n       *\n       *\n       * @param name\n       * @param value\n       * @param type\n       */\n      addPropAndSetEffect (name, value, type = container.SEED_TYPE_STRING) {\n        this.addStateProp(name, value, type);\n        this.addSetEffect(name, type);\n      }\n\n      addBoolPropAndEffects (name, value) {\n        this.addStateProp(name, !!value, container.SEED_TYPE_BOOLEAN);\n        this.addBoolEffect(name);\n      }\n\n      get middleware () {\n        return this._middleware.slice(0);\n      }\n\n      /**\n       * This method returns a simple Object with the properties of the seed.\n       * Not strictly necessary as Seed will have all the functionality of\n       * the returned hash, but for those who prefer \"freezing\" the signature\n       * of the seed, here you go.\n       *\n       * @returns {{effects, initialState: *, middleware: *}}\n       */\n      toHash () {\n        return {\n          effects: this.effects,\n          initialState: this.initialState,\n          middleware: this.middleware\n        }\n      }\n    }\n  )\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Seed.js","import _ from \"lodash\";\n\nexport default (bottle) => {\n  /**\n   * this is a shim for window to ensure functionality on the server.\n   * In the absence of a global window, an empty object is returned.\n   */\n  bottle.factory('window', (container) => {\n    if (!_.isUndefined(window)) {\n      return window;\n    }\n    return {};\n  })\n\n  bottle.factory('isStorageAvailable', (container) => function (type) {\n    /**\n     * this has been extracted from https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n     * note, to keep this usable in server / non browser contexts this uses an injected shim for window.\n     */\n    try {\n      var storage = container.window[type],\n        x = '__storage_test__';\n      storage.setItem(x, x);\n      storage.removeItem(x);\n      return true;\n    }\n    catch (e) {\n      return e instanceof DOMException && (\n          // everything except Firefox\n        e.code === 22 ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === 'QuotaExceededError' ||\n        // Firefox\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n        // acknowledge QuotaExceededError only if there's something already stored\n        storage.length !== 0;\n    }\n  })\n  bottle.factory('localStorage', (container) => {\n    if (container.isStorageAvailable('localStorage')) {\n      return localStorage;\n    } else {\n      return false;\n    }\n  });\n\n  bottle.factory('localStorageHas', ({localStorage}) => {\n    if (!localStorage) {\n      return () => false;\n    }\n    return (key) => {\n      let value = localStorage.getItem(key);\n      if (value === 'null') { // I haven't tracked down how, but in some cases it seems the null value is stringified when serialized in localStorage.\n        return false;\n      }\n      return !!value;\n    }\n  });\n  /**\n   * converts a string value to a typed value.\n   * @param value\n   * @param type {string}\n   * @returns {var}\n   */\n}\n\n\n// WEBPACK FOOTER //\n// ./src/localStorage.js","import _ from \"lodash\";\n\nexport default(bottle) => {\n  ['SEED_TYPE_STRING',\n    'SEED_TYPE_OBJECT',\n    'SEED_TYPE_INT',\n    'SEED_TYPE_FLOAT',\n    'SEED_TYPE_BOOLEAN',\n    'SEED_SERIALIZATION_LOCAL_STORAGE',\n    'SEED_SERIALIZATION_NONE']\n    .forEach((name) => bottle.constant(name, name));\n  bottle.factory('deserialize', (container) => (value, type) => {\n    if (value === null || _.isUndefined(value)) {\n      return null;\n    }\n    let out = value;\n    switch (type) {\n      case container.SEED_TYPE_OBJECT:\n        try {\n          return JSON.parse(value);\n        } catch (err) {\n          // console.log('bad serialization of object ', value, err);\n          out = null;\n        }\n        break;\n\n      case container.SEED_TYPE_INT:\n        out = parseInt(value);\n        if (isNaN(out)) {\n          out = 0;\n        }\n        break;\n\n      // note - booleans are serialized into '1' or '0';\n      case container.SEED_TYPE_BOOLEAN:\n        out = out === '1';\n        break;\n\n      default:\n        const methodName = `deserialize_${type}`\n        if (container[methodName] && _.isFunction(container[methodName])) {\n          out = container[methodName](value)\n        }\n    }\n    return out;\n  });\n\n  bottle.factory('serialize', (container) => (value, type) => {\n    if (value === null || _.isUndefined(value)) {\n      return null;\n    }\n    if (!type) {\n      type = container.SEED_TYPE_STRING;\n    }\n\n    let out = value;\n    switch (type) {\n      case container.SEED_TYPE_OBJECT:\n        try {\n          out = JSON.stringify(value);\n        } catch (err) {\n         // console.log('bad serialization of object: ', value, err);\n          out = null;\n        }\n        break;\n\n      case container.SEED_TYPE_INT:\n        out = isNaN(value) ? '0' : value.toString();\n        break;\n\n      case container.SEED_TYPE_BOOLEAN:\n        out = value ? '1' : '0';\n        break;\n\n      case container.SEED_TYPE_STRING:\n        out = _.toString(value);\n        break;\n\n      default:\n        // allow for extensions:\n        const methodName = `serialize_${type}`\n        if (container[methodName] && _.isFunction(container[methodName])) {\n          out = container[methodName](value)\n        }\n    }\n    return out;\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/serialization.js","import Bottle from 'bottlejs';\n\nimport StateConfig from './Seed';\nimport localStorage from './localStorage';\nimport serialization from './serialization';\nimport {Component} from 'react';\nimport React from 'react';\n/**\n * returns a bottle with Seed resources\n */\nexport default () => {\n  let bottle = new Bottle();\n\n  StateConfig(bottle);\n  localStorage(bottle);\n  serialization(bottle);\n\n  bottle.constant('React', React);\n  bottle.constant('Component', Component);\n\n  return bottle;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/init.js","import init from './init';\n\nconst bottle = init();\nconst Seed = bottle.container.Seed;\nexport default () => bottle.container.Seed;\n\nexport {init, bottle};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"bottlejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bottlejs\"\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}